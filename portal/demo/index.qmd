---
title: "Demo Shinylive"
toc: true
filters:
  - shinylive
---

::: {.toy-header}
# üåê Demo Shinylive
Interaktywne aplikacje dzialajace w przegladarce --- bez serwera!
:::

## Czym jest Shinylive?

**Shinylive** to technologia pozwalajaca uruchamiac aplikacje [Shiny](https://shiny.posit.co/) bezposrednio w przegladarce internetowej, bez potrzeby serwera. Dziala dzieki:

- **WebAssembly (Wasm)** --- kompilacja Pythona/R do kodu maszynowego przegladarki
- **Pyodide** --- pelny interpreter Pythona dzialajacy w przegladarce
- **webR** --- interpreter R dzialajacy w przegladarce

To oznacza, ze interaktywne aplikacje moga byc hostowane jako **statyczne pliki** --- np. na GitHub Pages!

## Interaktywny histogram (Python)

Ponizej znajduje sie uproszczona wersja zabawki "Histogram", dzialajaca calkowicie w Twojej przegladarce. Zmien parametry i obserwuj, jak zmienia sie rozklad:

::: {.callout-note}
## Pierwsze uruchomienie
Przy pierwszym uruchomieniu Shinylive pobiera srodowisko Python (~20 MB). Kolejne uruchomienia beda szybsze dzieki cache przegladarki.
:::

```{shinylive-python}
#| standalone: true
#| viewerHeight: 620

from shiny import App, ui, render, reactive
import numpy as np

app_ui = ui.page_fluid(
    ui.head_content(
        ui.tags.style("""
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; }
            .card { background: white; border-radius: 14px; padding: 1.5rem; margin-bottom: 1rem;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 6px 24px rgba(0,0,0,0.06); }
            .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-top: 1rem; }
            .stat-item { background: #f8fafc; padding: 0.75rem; border-radius: 10px; text-align: center; }
            .stat-label { font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.04em; }
            .stat-value { font-size: 1.1rem; color: #6366f1; font-weight: 700; }
            h3 { color: #1e293b; margin-bottom: 0.75rem; }
            .slider-group { margin-bottom: 1rem; }
        """)
    ),
    ui.div(
        {"class": "card"},
        ui.h3("Parametry rozkladu"),
        ui.div(
            {"class": "slider-group"},
            ui.input_slider("mu", "Srednia (Œº)", min=-5, max=5, value=0, step=0.5),
        ),
        ui.div(
            {"class": "slider-group"},
            ui.input_slider("sigma", "Odchylenie std. (œÉ)", min=0.5, max=5, value=1, step=0.25),
        ),
        ui.div(
            {"class": "slider-group"},
            ui.input_slider("n", "Wielkosc proby (n)", min=10, max=1000, value=200, step=10),
        ),
        ui.input_action_button("resample", "Nowa proba", class_="btn btn-primary"),
    ),
    ui.div(
        {"class": "card"},
        ui.h3("Histogram"),
        ui.output_plot("histogram", height="300px"),
    ),
    ui.div(
        {"class": "card"},
        ui.h3("Statystyki proby"),
        ui.div(
            {"class": "stats-grid"},
            ui.div(
                {"class": "stat-item"},
                ui.div({"class": "stat-label"}, "Srednia"),
                ui.output_text("stat_mean", container=ui.tags.div, class_="stat-value"),
            ),
            ui.div(
                {"class": "stat-item"},
                ui.div({"class": "stat-label"}, "Odch. std."),
                ui.output_text("stat_std", container=ui.tags.div, class_="stat-value"),
            ),
            ui.div(
                {"class": "stat-item"},
                ui.div({"class": "stat-label"}, "Mediana"),
                ui.output_text("stat_median", container=ui.tags.div, class_="stat-value"),
            ),
        ),
    ),
)

def server(input, output, session):
    @reactive.calc
    def sample_data():
        input.resample()
        return np.random.normal(loc=input.mu(), scale=input.sigma(), size=input.n())

    @render.plot
    def histogram():
        import matplotlib
        matplotlib.use("agg")
        import matplotlib.pyplot as plt

        data = sample_data()
        mu = input.mu()
        sigma = input.sigma()

        fig, ax = plt.subplots(figsize=(8, 4))

        ax.hist(data, bins=30, density=True, alpha=0.7, color="#818cf8",
                edgecolor="#6366f1", linewidth=0.5)

        x = np.linspace(mu - 4*sigma, mu + 4*sigma, 200)
        y = (1 / (sigma * np.sqrt(2 * np.pi))) * np.exp(-0.5 * ((x - mu) / sigma) ** 2)
        ax.plot(x, y, color="#ef4444", linewidth=2, label="Krzywa normalna")

        ax.set_xlabel("Wartosc", fontsize=11)
        ax.set_ylabel("Gestosc", fontsize=11)
        ax.legend(fontsize=10)
        ax.spines["top"].set_visible(False)
        ax.spines["right"].set_visible(False)
        fig.tight_layout()
        return fig

    @render.text
    def stat_mean():
        return f"{np.mean(sample_data()):.3f}"

    @render.text
    def stat_std():
        return f"{np.std(sample_data(), ddof=1):.3f}"

    @render.text
    def stat_median():
        return f"{np.median(sample_data()):.3f}"

app = App(app_ui, server)
```

## Jak to dziala technicznie?

```
Quarto (.qmd)
    ‚îî‚îÄ shinylive extension
         ‚îî‚îÄ kompilacja do WebAssembly
              ‚îî‚îÄ statyczne pliki HTML/JS/Wasm
                   ‚îî‚îÄ GitHub Pages (hosting)
                        ‚îî‚îÄ przegladarka uzytkownika (wykonanie)
```

Caly kod Pythona jest wykonywany **lokalnie w przegladarce** --- serwer sluzy tylko do serwowania statycznych plikow.

## Ograniczenia Shinylive

| Cecha | Shinylive (przegladarka) | Serwer (Shiny Server) |
|-------|--------------------------|----------------------|
| Hosting | Statyczny (GitHub Pages) | Wymaga serwera |
| Koszt | Darmowy | Serwer = koszty |
| Wydajnosc | Ograniczona (Wasm) | Pelna moc serwera |
| Biblioteki | Pyodide/webR (wiekszosc) | Wszystkie |
| Dane | Tylko wbudowane | Bazy danych, pliki |
| Czas ladowania | Dluzszy (1. raz) | Natychmiastowy |

::: {.callout-tip}
## Kiedy uzyc Shinylive?
Shinylive idealnie nadaje sie do **demo, tutoriali i prostych narzedzi edukacyjnych** --- dokladnie takich jak nasze zabawki statystyczne! Dla zaawansowanych zastosowac (duze dane, skomplikowane obliczenia) lepszy bedzie dedykowany serwer.
:::
